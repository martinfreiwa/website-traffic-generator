{"timestamp": "2026-02-21T01:42:54.323464Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://portallineup.com.br/conteudo-de-marca/qual-seu-perfil-de-viajante-faca-o-teste-com-sua-playlist-e-veja-destinos-ideais/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:42:54.326332Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:42:54.328802Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:42:54.330856Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:42:55.232038Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:42:58.667728Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:42:59.823604Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:42:59.827046Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:43:03.598906Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:43:03.601716Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:43:03.604608Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:43:03.606919Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:43:03.609904Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:43:08.651087Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:43:12.043024Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:43:16.531582Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:43:16.533822Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:43:30.189064Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:43:33.526781Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:43:36.898154Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:43:47.775020Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:43:51.326220Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:43:59.697001Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:08.747218Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:18.365345Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:44:18.368564Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:22.582490Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:32.755968Z", "level": "ERROR", "logger": "enhanced_scheduler", "message": "Scheduler check failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: FATAL:  remaining connection slots are reserved for non-replication superuser connections\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "enhanced_scheduler", "function": "check_and_run", "line": 244}
{"timestamp": "2026-02-21T01:44:32.758686Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:36.275004Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:39.691910Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:43.315169Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:44:43.318724Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:44:43.321346Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:44:43.324204Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:48.479447Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:44:49.304562Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:52.774572Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:56.321760Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:44:59.628302Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:07.206562Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:45:07.209332Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:45:07.212573Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:10.769403Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:14.536753Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:17.991994Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:21.529020Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:24.844980Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:28.344758Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:31.608997Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:45:36.460424Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:41.158763Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:47.312447Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:53.246276Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:45:59.052778Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:02.455838Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:07.484281Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:46:07.495155Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:46:07.503738Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:46:10.892808Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:14.283207Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:17.677210Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:21.035171Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:26.118886Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:32.033980Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:46:32.036378Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:46:32.039137Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:35.485739Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:38.906448Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://www.effectivegatecpm.com/hudsrqzzpn?key=216c278f4b17ab4488890d0e75020d3a: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:46:38.909855Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:46:40.827219Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:46:43.602414Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:46.981506Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:50.262833Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:53.663631Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:46:59.919387Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://agwotu.blogspot.com/2026/02/unveiling-origins-of-ash-wednesday.html: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:46:59.922868Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:46:59.925802Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:46:59.928939Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:47:05.950731Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:47:05.953255Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:47:05.956966Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:47:09.535943Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:47:15.695444Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:47:20.000418Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:47:20.002901Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:47:20.006221Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:47:20.008840Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:47:21.904370Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "Failed to log hit: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: FATAL:  remaining connection slots are reserved for non-replication superuser connections\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "_db_log_hit", "line": 592}
{"timestamp": "2026-02-21T01:47:22.984029Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:47:26.282039Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:47:30.214778Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:47:33.632025Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:47:33.637165Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:47:33.641159Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:47:33.644552Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:47:43.483597Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:47:47.061339Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:47:50.410903Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:47:55.457272Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:47:59.093333Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:48:02.589976Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:48:11.023096Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:48:14.832472Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:48:16.484781Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:48:20.883473Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:48:24.284927Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:48:24.288805Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:48:24.292200Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:48:24.295148Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:48:32.334517Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:48:32.337705Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:48:32.340823Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:48:38.417882Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:48:41.862819Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:48:41.866434Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:48:41.870202Z", "level": "ERROR", "logger": "web_utils", "message": "Error fetching title for https://ladiscussione.com/: ", "request_id": "", "user_id": "", "module": "web_utils", "function": "fetch_page_title", "line": 47}
{"timestamp": "2026-02-21T01:48:41.873264Z", "level": "ERROR", "logger": "proxy_service", "message": "Proxy verification failed: ", "request_id": "", "user_id": "", "module": "proxy_service", "function": "verify_proxy_location", "line": 106}
{"timestamp": "2026-02-21T01:48:43.371820Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "Failed to create proxy session: (psycopg2.OperationalError) server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n[SQL: SELECT proxy_providers.id AS proxy_providers_id, proxy_providers.name AS proxy_providers_name, proxy_providers.provider_type AS proxy_providers_provider_type, proxy_providers.username AS proxy_providers_username, proxy_providers.password AS proxy_providers_password, proxy_providers.service_name AS proxy_providers_service_name, proxy_providers.proxy_host AS proxy_providers_proxy_host, proxy_providers.http_port_start AS proxy_providers_http_port_start, proxy_providers.http_port_end AS proxy_providers_http_port_end, proxy_providers.is_active AS proxy_providers_is_active, proxy_providers.session_lifetime_minutes AS proxy_providers_session_lifetime_minutes, proxy_providers.bandwidth_limit_gb AS proxy_providers_bandwidth_limit_gb, proxy_providers.bandwidth_used_gb AS proxy_providers_bandwidth_used_gb, proxy_providers.notification_email AS proxy_providers_notification_email, proxy_providers.warn_at_80 AS proxy_providers_warn_at_80, proxy_providers.warn_at_50 AS proxy_providers_warn_at_50, proxy_providers.warn_at_20 AS proxy_providers_warn_at_20, proxy_providers.warned_at_80 AS proxy_providers_warned_at_80, proxy_providers.warned_at_50 AS proxy_providers_warned_at_50, proxy_providers.warned_at_20 AS proxy_providers_warned_at_20, proxy_providers.warned_at_100 AS proxy_providers_warned_at_100, proxy_providers.last_sync_at AS proxy_providers_last_sync_at, proxy_providers.created_at AS proxy_providers_created_at, proxy_providers.updated_at AS proxy_providers_updated_at \nFROM proxy_providers \nWHERE proxy_providers.is_active = true \n LIMIT %(param_1)s]\n[parameters: {'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "run_for_project", "line": 1127}
{"timestamp": "2026-02-21T01:48:43.378417Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "Failed to create proxy session: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "run_for_project", "line": 1127}
{"timestamp": "2026-02-21T01:48:43.384284Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "Failed to create proxy session: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "run_for_project", "line": 1127}
{"timestamp": "2026-02-21T01:48:43.388939Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:48:43.391850Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "GA Hit error: ", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "send_hit", "line": 508}
{"timestamp": "2026-02-21T01:48:43.395491Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "Failed to log hit: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "_db_log_hit", "line": 592}
{"timestamp": "2026-02-21T01:48:43.398257Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "Failed to update session stats: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "_update_session_stats", "line": 988}
{"timestamp": "2026-02-21T01:48:43.401246Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "Failed to log hit: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "_db_log_hit", "line": 592}
{"timestamp": "2026-02-21T01:48:43.403962Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "Failed to update session stats: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "_update_session_stats", "line": 988}
{"timestamp": "2026-02-21T01:48:43.407660Z", "level": "ERROR", "logger": "enhanced_hit_emulator", "message": "Failed to update session stats: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "enhanced_hit_emulator", "function": "_update_session_stats", "line": 988}
{"timestamp": "2026-02-21T01:48:43.420737Z", "level": "ERROR", "logger": "asyncio", "message": "Task exception was never retrieved\nfuture: <Task finished name='Task-16' coro=<TrafficScheduler._process_project.<locals>._run_with_semaphore() done, defined at /Users/martin/ab/backend/enhanced_scheduler.py:401> exception=OperationalError('(psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\\n\\tIs the server running on that host and accepting TCP/IP connections?\\n')>", "request_id": "", "user_id": "", "module": "base_events", "function": "default_exception_handler", "line": 1875, "exception": "Traceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/martin/ab/backend/enhanced_hit_emulator.py\", line 1105, in run_for_project\n    .first()\n     ~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/sql/elements.py\", line 527, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2363, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n[SQL: SELECT proxy_providers.id AS proxy_providers_id, proxy_providers.name AS proxy_providers_name, proxy_providers.provider_type AS proxy_providers_provider_type, proxy_providers.username AS proxy_providers_username, proxy_providers.password AS proxy_providers_password, proxy_providers.service_name AS proxy_providers_service_name, proxy_providers.proxy_host AS proxy_providers_proxy_host, proxy_providers.http_port_start AS proxy_providers_http_port_start, proxy_providers.http_port_end AS proxy_providers_http_port_end, proxy_providers.is_active AS proxy_providers_is_active, proxy_providers.session_lifetime_minutes AS proxy_providers_session_lifetime_minutes, proxy_providers.bandwidth_limit_gb AS proxy_providers_bandwidth_limit_gb, proxy_providers.bandwidth_used_gb AS proxy_providers_bandwidth_used_gb, proxy_providers.notification_email AS proxy_providers_notification_email, proxy_providers.warn_at_80 AS proxy_providers_warn_at_80, proxy_providers.warn_at_50 AS proxy_providers_warn_at_50, proxy_providers.warn_at_20 AS proxy_providers_warn_at_20, proxy_providers.warned_at_80 AS proxy_providers_warned_at_80, proxy_providers.warned_at_50 AS proxy_providers_warned_at_50, proxy_providers.warned_at_20 AS proxy_providers_warned_at_20, proxy_providers.warned_at_100 AS proxy_providers_warned_at_100, proxy_providers.last_sync_at AS proxy_providers_last_sync_at, proxy_providers.created_at AS proxy_providers_created_at, proxy_providers.updated_at AS proxy_providers_updated_at \nFROM proxy_providers \nWHERE proxy_providers.is_active = true \n LIMIT %(param_1)s]\n[parameters: {'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 716, in checkout\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 714, in checkout\n    dbapi_connection = rec.get_connection()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 865, in get_connection\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/martin/ab/backend/enhanced_scheduler.py\", line 403, in _run_with_semaphore\n    await ga_emu_engine.run_for_project(project.id, visitors_to_spawn)\n  File \"/Users/martin/ab/backend/enhanced_hit_emulator.py\", line 1139, in run_for_project\n    .first()\n     ~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 716, in checkout\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 714, in checkout\n    dbapi_connection = rec.get_connection()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 865, in get_connection\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T02:01:53.804374Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:21:22.210262Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:22:00.909342Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:22:18.671762Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:22:43.302025Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:22:57.223827Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:29:10.188957Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:29:51.312179Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:31:04.950911Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:41:16.616855Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:53:32.902032Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:54:11.674436Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:54:51.154865Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:55:57.548929Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T02:56:40.458344Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T04:11:19.875537Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T04:11:36.498423Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T04:11:57.492902Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T04:26:02.192002Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T04:26:42.494615Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T04:27:02.994394Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T06:09:19.018968Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T06:09:35.619390Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T06:10:15.897900Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T06:11:19.503296Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T06:12:28.950588Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T06:13:07.115284Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T06:14:23.011554Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T12:38:26.399312Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T13:41:49.682614Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T13:45:33.491254Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T13:46:38.522809Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T13:49:23.776291Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T13:50:08.291783Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T13:53:29.009205Z", "level": "ERROR", "logger": "main", "message": "Unhandled exception on POST /auth/token: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "255c12fd", "user_id": "", "module": "main", "function": "global_exception_handler", "line": 873, "exception": "Traceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 829, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 115, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 101, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 355, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 243, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/slowapi/extension.py\", line 734, in async_wrapper\n    response = await func(*args, **kwargs)  # type: ignore\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 2104, in login_for_access_token\n    user = db.query(models.User).filter(models.User.email == form_data.username).first()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T13:53:29.041592Z", "level": "ERROR", "logger": "error_logger", "message": "Exception captured: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "255c12fd", "user_id": "", "module": "error_logger", "function": "capture_exception", "line": 215, "exception": "Traceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 829, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 115, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 101, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 355, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 243, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/slowapi/extension.py\", line 734, in async_wrapper\n    response = await func(*args, **kwargs)  # type: ignore\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 2104, in login_for_access_token\n    user = db.query(models.User).filter(models.User.email == form_data.username).first()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T13:53:29.113708Z", "level": "ERROR", "logger": "main", "message": "Unhandled exception on POST /auth/token: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "c4f14262", "user_id": "", "module": "main", "function": "global_exception_handler", "line": 873, "exception": "Traceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 829, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 115, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 101, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 355, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 243, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/slowapi/extension.py\", line 734, in async_wrapper\n    response = await func(*args, **kwargs)  # type: ignore\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 2104, in login_for_access_token\n    user = db.query(models.User).filter(models.User.email == form_data.username).first()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T13:53:29.140538Z", "level": "ERROR", "logger": "error_logger", "message": "Exception captured: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "c4f14262", "user_id": "", "module": "error_logger", "function": "capture_exception", "line": 215, "exception": "Traceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 829, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 115, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 101, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 355, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 243, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/slowapi/extension.py\", line 734, in async_wrapper\n    response = await func(*args, **kwargs)  # type: ignore\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 2104, in login_for_access_token\n    user = db.query(models.User).filter(models.User.email == form_data.username).first()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T13:53:29.207038Z", "level": "ERROR", "logger": "main", "message": "Unhandled exception on POST /auth/token: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "be2cbaaf", "user_id": "", "module": "main", "function": "global_exception_handler", "line": 873, "exception": "Traceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 829, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 115, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 101, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 355, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 243, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/slowapi/extension.py\", line 734, in async_wrapper\n    response = await func(*args, **kwargs)  # type: ignore\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 2104, in login_for_access_token\n    user = db.query(models.User).filter(models.User.email == form_data.username).first()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T13:53:29.234712Z", "level": "ERROR", "logger": "error_logger", "message": "Exception captured: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "be2cbaaf", "user_id": "", "module": "error_logger", "function": "capture_exception", "line": 215, "exception": "Traceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 829, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 115, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 101, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 355, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/fastapi/routing.py\", line 243, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/slowapi/extension.py\", line 734, in async_wrapper\n    response = await func(*args, **kwargs)  # type: ignore\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 2104, in login_for_access_token\n    user = db.query(models.User).filter(models.User.email == form_data.username).first()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/venv/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T14:13:24.952701Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T14:13:57.081786Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T14:15:48.584002Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T14:19:40.892092Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T14:19:40.932941Z", "level": "ERROR", "logger": "main", "message": "Unhandled exception on GET /internal/project/nonexistent-id: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "f03b8630", "user_id": "", "module": "main", "function": "global_exception_handler", "line": 873, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 829, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/to_thread.py\", line 63, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 2502, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n  File \"/Users/martin/ab/backend/main.py\", line 11396, in internal_get_project\n    project = db.query(models.Project).filter(models.Project.id == project_id).first()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T14:19:40.943737Z", "level": "ERROR", "logger": "error_logger", "message": "Exception captured: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "f03b8630", "user_id": "", "module": "error_logger", "function": "capture_exception", "line": 215, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 829, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/to_thread.py\", line 63, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 2502, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n  File \"/Users/martin/ab/backend/main.py\", line 11396, in internal_get_project\n    project = db.query(models.Project).filter(models.Project.id == project_id).first()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T14:37:11.268772Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T15:50:25.677680Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T15:50:42.533163Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T15:51:56.567632Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T16:16:42.706298Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 994}
{"timestamp": "2026-02-21T16:30:05.668674Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 997}
{"timestamp": "2026-02-21T16:31:10.651954Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 1032}
{"timestamp": "2026-02-21T16:47:32.722190Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 1032}
{"timestamp": "2026-02-21T16:47:43.286225Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 1032}
{"timestamp": "2026-02-21T16:48:11.840319Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 1032}
{"timestamp": "2026-02-21T18:01:54.359392Z", "level": "ERROR", "logger": "main", "message": "Migration error: (sqlite3.OperationalError) no such table: information_schema.columns\n[SQL: SELECT 1 FROM information_schema.columns WHERE table_name = ? AND column_name = ?]\n[parameters: ('users', 'email')]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "run_column_migrations", "line": 787}
{"timestamp": "2026-02-21T18:01:54.530621Z", "level": "ERROR", "logger": "main", "message": "Unhandled exception on GET /internal/proxy-provider: AttributeError: 'ProxyProvider' object has no attribute 'api_key'", "request_id": "d7a58535", "user_id": "", "module": "main", "function": "global_exception_handler", "line": 933, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 889, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 312, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/routers/internal.py\", line 188, in internal_get_proxy_provider\n    \"api_key\": provider.api_key[:8] + \"...\" if provider.api_key else None,\n                                               ^^^^^^^^^^^^^^^^\nAttributeError: 'ProxyProvider' object has no attribute 'api_key'"}
{"timestamp": "2026-02-21T18:01:54.533963Z", "level": "ERROR", "logger": "error_logger", "message": "Exception captured: AttributeError: 'ProxyProvider' object has no attribute 'api_key'", "request_id": "d7a58535", "user_id": "", "module": "error_logger", "function": "capture_exception", "line": 215, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 889, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 312, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/routers/internal.py\", line 188, in internal_get_proxy_provider\n    \"api_key\": provider.api_key[:8] + \"...\" if provider.api_key else None,\n                                               ^^^^^^^^^^^^^^^^\nAttributeError: 'ProxyProvider' object has no attribute 'api_key'"}
{"timestamp": "2026-02-21T18:02:21.644730Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 1082}
{"timestamp": "2026-02-21T18:02:21.693035Z", "level": "ERROR", "logger": "main", "message": "Unhandled exception on GET /internal/project/nonexistent-id: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "2fefd342", "user_id": "", "module": "main", "function": "global_exception_handler", "line": 933, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 889, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/to_thread.py\", line 63, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 2502, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n  File \"/Users/martin/ab/backend/routers/internal.py\", line 66, in internal_get_project\n    project = db.query(models.Project).filter(models.Project.id == project_id).first()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T18:02:21.704542Z", "level": "ERROR", "logger": "error_logger", "message": "Exception captured: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "2fefd342", "user_id": "", "module": "error_logger", "function": "capture_exception", "line": 215, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 889, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/to_thread.py\", line 63, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 2502, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n  File \"/Users/martin/ab/backend/routers/internal.py\", line 66, in internal_get_project\n    project = db.query(models.Project).filter(models.Project.id == project_id).first()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T22:27:01.742842Z", "level": "ERROR", "logger": "main", "message": "Migration error: (sqlite3.OperationalError) no such table: information_schema.columns\n[SQL: SELECT 1 FROM information_schema.columns WHERE table_name = ? AND column_name = ?]\n[parameters: ('users', 'email')]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "run_column_migrations", "line": 793}
{"timestamp": "2026-02-21T22:27:01.909488Z", "level": "ERROR", "logger": "main", "message": "Unhandled exception on GET /internal/proxy-provider: AttributeError: 'ProxyProvider' object has no attribute 'api_key'", "request_id": "bb849d3e", "user_id": "", "module": "main", "function": "global_exception_handler", "line": 939, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 895, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 312, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/routers/internal.py\", line 218, in internal_get_proxy_provider\n    \"api_key\": provider.api_key[:8] + \"...\" if provider.api_key else None,\n                                               ^^^^^^^^^^^^^^^^\nAttributeError: 'ProxyProvider' object has no attribute 'api_key'"}
{"timestamp": "2026-02-21T22:27:01.912828Z", "level": "ERROR", "logger": "error_logger", "message": "Exception captured: AttributeError: 'ProxyProvider' object has no attribute 'api_key'", "request_id": "bb849d3e", "user_id": "", "module": "error_logger", "function": "capture_exception", "line": 215, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 895, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 312, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/routers/internal.py\", line 218, in internal_get_proxy_provider\n    \"api_key\": provider.api_key[:8] + \"...\" if provider.api_key else None,\n                                               ^^^^^^^^^^^^^^^^\nAttributeError: 'ProxyProvider' object has no attribute 'api_key'"}
{"timestamp": "2026-02-21T22:41:02.519551Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 1088}
{"timestamp": "2026-02-21T22:42:36.720083Z", "level": "ERROR", "logger": "main", "message": "Startup failed: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "", "user_id": "", "module": "main", "function": "app_startup", "line": 1088}
{"timestamp": "2026-02-21T22:42:50.928642Z", "level": "ERROR", "logger": "main", "message": "Unhandled exception on POST /auth/register: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "43fb599f", "user_id": "", "module": "main", "function": "global_exception_handler", "line": 939, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 895, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/to_thread.py\", line 63, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 2502, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n  File \"/opt/homebrew/lib/python3.14/site-packages/slowapi/extension.py\", line 766, in sync_wrapper\n    response = func(*args, **kwargs)\n  File \"/Users/martin/ab/backend/main.py\", line 2018, in register\n    settings_row = db.query(models.SystemSettings).first()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T22:42:50.942326Z", "level": "ERROR", "logger": "error_logger", "message": "Exception captured: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "43fb599f", "user_id": "", "module": "error_logger", "function": "capture_exception", "line": 215, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 895, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/to_thread.py\", line 63, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 2502, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n  File \"/opt/homebrew/lib/python3.14/site-packages/slowapi/extension.py\", line 766, in sync_wrapper\n    response = func(*args, **kwargs)\n  File \"/Users/martin/ab/backend/main.py\", line 2018, in register\n    settings_row = db.query(models.SystemSettings).first()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T22:44:13.554992Z", "level": "ERROR", "logger": "main", "message": "Unhandled exception on POST /auth/token: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "444ce5af", "user_id": "", "module": "main", "function": "global_exception_handler", "line": 939, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 895, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 95, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 153, in simple_response\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 312, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/slowapi/extension.py\", line 734, in async_wrapper\n    response = await func(*args, **kwargs)  # type: ignore\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 2118, in login_for_access_token\n    user = db.query(models.User).filter(models.User.email == form_data.username).first()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2026-02-21T22:44:13.566421Z", "level": "ERROR", "logger": "error_logger", "message": "Exception captured: OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "request_id": "444ce5af", "user_id": "", "module": "error_logger", "function": "capture_exception", "line": 215, "exception": "Traceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/Cellar/python@3.14/3.14.2_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 895, in request_id_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 95, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/cors.py\", line 153, in simple_response\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/opt/homebrew/lib/python3.14/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 424, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/fastapi/routing.py\", line 312, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/slowapi/extension.py\", line 734, in async_wrapper\n    response = await func(*args, **kwargs)  # type: ignore\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/martin/ab/backend/main.py\", line 2118, in login_for_access_token\n    user = db.query(models.User).filter(models.User.email == form_data.username).first()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/orm/session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3285, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 2448, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/base.py\", line 3309, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/pool/base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/sqlalchemy/engine/default.py\", line 630, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/lib/python3.14/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"127.0.0.1\", port 5433 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
